# Event Loop (JS)

> Event Loop является стеком, где хранятся все задачи, которые не вошли в синхронный поток выполнения. После завершения
> синхронного потока - задачи начинают выполняться из Event Loop'а. Однако у Event Loop'а тоже есть свои правила.
>

Он делит все задачи на подтипы:

- **микрозадачи**;
- **макрозадачи**;
- **задачи отрисовки**.

В **микрозадачи** попадают в основном только две категории: then у промисов, а также Intersection Observer.

**Макрозадачами** являются все асинхронные операции, такие как XmlHTTPRequest, setTimeout и так далее.

В **задачи отрисовки** попадают задачи связанные с отрисовкой и обновлением контента страницы.

*Каким образом определяется, какая из задач выполняется первой?*

1. Сначала Event Loop проверяет выполнились ли все синхронные задачи
2. Потом выполняются **все задачи** из микротасков
3. После выполнения всех микротасков - очередь очищается
4. Затем мы берем **одну макрозадачу** из списка и выполняем ее
5. После выполнения мы смотрим нужно ли нам сделать перерисовку страницы
6. Если перерисовать страницу нужно - делаем это
7. Все снова начинается с первого пункта

*Подробнее:* [Event Loop](https://habr.com/ru/articles/762618/)