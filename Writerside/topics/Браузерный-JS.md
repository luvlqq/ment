# Браузерный JS

Главное помнить, что this глобально ссылается на **_window_** в браузере, а в NodeJS на **_global_**.

**_DOM_** - Document Object Model - объектная модель документа, которая представляет все содержимое страницы в виде объектов, которые можно менять. Дерево строится на основе html тэгов. Каждый html тэг является объектом. Все операции с **_DOM_** начинаются с ключевого слово _document_.

**_BOM_** - Browser Object Model - это дополнительные объекты, предоставляемые браузером, что бы работать со всем, кроме документа.

## Браузерные события

Событие - это сигнал браузеру что что-то произошло.

Существуют различные события, такие как:

- События мыши:
    - `click`
    - `contextmenu`
    - `mouseover/mouseout`
    - `mousedown/mouseup`
    - `mousemove`
- События на элементах управления:
    - `submit`
    - `focus`
- Клавиатурные события:
    - `keydown`
    - `keyup`
- События документа:
    - `DOMContentLoaded`

**_Обработчики событий_** - событию можно назначить обработчик, то есть функцию которая отработает, как только произойдет событие.

**_addEventListener_** - позволяет добавить сразу несколько действий на событие

## Всплытие и погружение

Принцип **_всплытия_** крайне прост - когда событие срабатывает на элементе, то оно поднимается вверх по родителям.

**_eventTarget_** - это самый глубокий элемент, который вызывает событие.

**_Погружение_** - событие обратное всплытию.

Существует 3 фазы перехода события:

1. **_Фаза погружения_** - событие идет сверху вниз;
2. **_Фаза цели_** - событие достигает целевого элемента;
3. **_Фаза всплытия_** - событие начинает всплывать.

***StopPropagation*** - остановка пути

**_Event Propagation_** — это механизм, который определяет, как события проходят через объектную модель документа (DOM) при возникновении события, в конечном итоге достигая целевого элемента и, возможно, выполняя дальнейшие действия на основе события.

**_prevent default_** - событие, которое используется для отмены действия браузера по умолчанию. Как пример - отмена перехода по ссылке при клике на нее.

**_Current target_** - содержит элемент, для которого было назначено событие. В отличие от event.target, это не самый глубокий тег, в котором случилось событие, а именно элемент, к которому оно было привязано.

**_DOM content loaded_** - Событие запускается когда первоначальный HTML документ будет полностью загружен и разобран, без ожидания полной загрузки таблиц стилей, изображений и фреймов.

и td\*\*

область видимости, постфиксаня префиксная форма, контекст, event loop, объеты(создание перебор свойств копирование, дескрипторы)

```Javascript
let a = 1, b=1;
alert(++a); // 2, префиксная форма возвращает новое значение
alert(b++); // 1, постфиксная форма возвращает старое значение
```

замыкания,лекс окружение, массивы методы мутирования.

У жизненного цикла HTML-страницы есть три важных события:

- **_DOMContentLoaded_** – браузер полностью загрузил HTML, было построено DOM-дерево, но внешние ресурсы, такие как картинки `<img>` и стили, могут быть ещё не загружены.
- **_load_** – браузер загрузил HTML и внешние ресурсы (картинки, стили и т.д.).
- **_beforeunload/unload_** – пользователь покидает страницу.

**_EventCurrentTarget_** - доступное только для чтения, Event идентифицирует элемент, к которому прикреплен обработчик событий.

**_focus/blur_** - никогда не всплывают.

**_Критический путь рендеринга_** – это набор минимально необходимых для начала отрисовки страницы действий, ресурсов и вычислений.
Посмотрим основные шаги, которые включает в себя **_критический_** путь:

1. Получить HTML-документ.
2. Провести парсинг HTML на предмет включенных ресурсов.
3. Построить DOM tree (document object model).
4. Отправить запросы критических элементов.
5. Получить весь CSS-код (также запустить запросы на JS-файлы).
6. Построить CSSOM tree.
7. Выполнить весь полученный JS-код.
8. Перестроить DOM tree (при необходимости).
9. Построить Render tree и начать отрисовку страницы.
